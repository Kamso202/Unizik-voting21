document.addEventListener(\'DOMContentLoaded\', () => {\n    // If already logged in, redirect to the dashboard\n    if (localStorage.getItem(\'adminToken\')) {\n        window.location.href = \'admin.html\';\n        return;\n    }\n\n    const loginForm = document.getElementById(\'admin-login-form\');\n    const messageElement = document.getElementById(\'login-message\');\n    const API_BASE_URL = \'http://localhost:3000/api\';\n\n    loginForm.addEventListener(\'submit\', async (e) => {\n        e.preventDefault();\n\n        const username = document.getElementById(\'username\').value;\n        const password = document.getElementById(\'password\').value;\n\n        // Clear previous messages\n        messageElement.textContent = \'\';\n\n        try {\n            const response = await fetch(`${API_BASE_URL}/admin/login\`, {\n                method: \'POST\',\n                headers: { \'Content-Type\': \'application/json\' },\n                body: JSON.stringify({ username, password })\n            });\n\n            const data = await response.json();\n\n            if (response.ok) {\n                localStorage.setItem(\'adminToken\', data.token);\n                messageElement.textContent = \'Login successful! Redirecting...\';\n                messageElement.style.color = \'green\';\n                // Redirect after a short delay to allow the message to be seen\n                setTimeout(() => {\n                    window.location.href = \'admin.html\';\n                }, 1000);\n            } else {\n                messageElement.textContent = data.message || \'Login failed. Please try again.\';\n                messageElement.style.color = \'red\';\n            }\n        } catch (err) {\n            console.error(\'Login Error:\', err);\n            messageElement.textContent = \'An error occurred. Please check the server connection.\';\n            messageElement.style.color = \'red\';\n        }\n    });\n});\n